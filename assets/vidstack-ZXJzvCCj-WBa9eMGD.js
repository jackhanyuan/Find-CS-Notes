import{az as n,z as c,e as l,l as a,ai as h,aA as u,k as b}from"./vidstack-UGaMhNs3-oMaa63Ea.js";function p(e,t=3e3){const s=n();return setTimeout(()=>{const i=e();i&&s.reject(i)},t),s}class f{constructor(t){this.r=c(""),this.referrerPolicy=null,this.lb=t,t.setAttribute("frameBorder","0"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this.lb}setup(t){l(this.mb.bind(this)),a(window,"message",this.nb.bind(this)),a(this.lb,"load",this.Z.bind(this))}mb(){const t=this.r();if(!t.length){this.lb.setAttribute("src","");return}const s=h(()=>this.S());this.lb.setAttribute("src",u(t,s))}_(t,s){var i;(i=this.lb.contentWindow)==null||i.postMessage(JSON.stringify(t),s??"*")}nb(t){var o;const s=this.p();if(t.source===((o=this.lb)==null?void 0:o.contentWindow)&&(!b(s)||s===t.origin)){try{const r=JSON.parse(t.data);r&&this.Y(r,t);return}catch{}t.data&&this.Y(t.data,t)}}}export{f as E,p as t};
