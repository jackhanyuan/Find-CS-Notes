import{u as U,f as R,g as S,j as Z,h as w,i as A,k as Q,l as z,S as N,t as J,m as $,n as _,p as ee,q as te,s as se,v as e,R as K,x as H,y as ae,z as le}from"./app.91f882ec.js";const oe="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";const P=()=>e(H,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));P.displayName="CloseIcon";const X=()=>e(H,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));X.displayName="HeadingIcon";const D=()=>e(H,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));D.displayName="HeartIcon";const E=()=>e(H,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));E.displayName="HistoryIcon";const W=()=>e(H,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));W.displayName="TitleIcon";const re={},ne=300,Y=5,ce={"/":{cancel:"取消",placeholder:"开始搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},ue="search-pro-history-results",m=U(ue,[]),ie=()=>({history:m,addHistory:s=>{m.value.length<Y?m.value=[s,...m.value]:m.value=[s,...m.value.slice(0,Y-1)]},removeHistory:s=>{m.value=[...m.value.slice(0,s),...m.value.slice(s+1)]}}),pe=R(oe),ve=S(()=>JSON.parse(Z(pe.value))),b=(s,h)=>{const p=[];let a=0,l=0;const c=s.toLowerCase(),d=h.toLowerCase();let r=c.indexOf(d,a);const g=(n,v)=>{let t=n,o=!1;if(!v&&t.length>100&&l===0&&(t=`… ${t.slice(-10)}`),l+t.length>100){if(p.some(x=>x[0]==="strong"))return;t=t.slice(0,Math.max(100-l,1)),o=!0}t.length&&(p.push(v?["strong",t]:t),l+=t.length),o&&(p.push("…"),l+=2)};if(r<0)return null;for(;r>=0;){const n=r+d.length;if(g(s.slice(a,r),!1),g(s.slice(r,n),!0),a=n,r=c.indexOf(d,a),l>100)break}return g(s.slice(a),!1),p},q=s=>s.reduce((h,{type:p})=>h+(p==="title"?50:p==="heading"?20:p==="custom"?10:1),0),he=(s,h)=>{var p;const a={};for(const[l,c]of Object.entries(h)){const d=((p=h[l.replace(/\/[^\\]*$/,"")])==null?void 0:p.title)||"",r=`${d?`${d} > `:""}${c.title}`,g=b(c.title,s);g&&(a[r]=[...a[r]||[],{type:"title",path:l,display:g}]),c.customFields&&Object.entries(c.customFields).forEach(([n,v])=>{v.forEach(t=>{const o=b(t,s);o&&(a[r]=[...a[r]||[],{type:"custom",path:l,index:n,display:o}])})});for(const n of c.contents){const v=b(n.header,s);v&&(a[r]=[...a[r]||[],{type:"heading",path:l+(n.slug?`#${n.slug}`:""),display:v}]);for(const t of n.contents){const o=b(t,s);o&&(a[r]=[...a[r]||[],{type:"content",header:n.header,path:l+(n.slug?`#${n.slug}`:""),display:o}])}}}return Object.keys(a).sort((l,c)=>q(a[l])-q(a[c])).map(l=>({title:l,contents:a[l]}))},de=s=>{const h=z(),p=R([]),a=S(()=>ve.value[h.value]),l=le(c=>{p.value=c?he(c,a.value):[]},ne);return ae([s,h],()=>{l(s.value)}),p};var me=w({name:"SearchResult",props:{query:{type:String,required:!0}},emits:["close","updateQuery"],setup(s,{emit:h}){const p=A(),a=Q(),l=z(),c=N(ce),{history:d,addHistory:r,removeHistory:g}=ie(),n=J(s,"query"),v=de(n),t=R(0),o=R(0),x=R(),M=S(()=>v.value.length>0),O=S(()=>v.value[t.value]||null),k=()=>{t.value=t.value>0?t.value-1:v.value.length-1,o.value=O.value.contents.length-1},B=()=>{t.value=t.value<v.value.length-1?t.value+1:0,o.value=0},V=()=>{o.value<O.value.contents.length-1?o.value=o.value+1:B()},j=()=>{o.value>0?o.value=o.value-1:k()},G=u=>u.map(i=>typeof i=="string"?i:e(i[0],i[1])),F=u=>{if(u.type==="custom"){const i=re[u.index]||"$content",[f,C=""]=typeof i=="object"?i[l.value].split("$content"):i.split("$content");return G([f,...u.display,C])}return G(u.display)},L=()=>{t.value=0,o.value=0,h("updateQuery",""),h("close")};return $(()=>{_("keydown",u=>{if(M.value){if(u.key==="ArrowUp")j();else if(u.key==="ArrowDown")V();else if(u.key==="Enter"){const i=O.value.contents[o.value];a.path!==i.path&&(r(i),p.push(i.path),L())}}}),ee(x.value,{reserveScrollBarGap:!0})}),te(()=>{se()}),()=>e("div",{class:["search-pro-result",{empty:n.value===""?d.value.length===0:!M.value}],ref:x},n.value===""?d.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},c.value.history),d.value.map((u,i)=>e(K,{to:u.path,class:["search-pro-result-item",{active:o.value===i}],onClick:()=>{L()}},()=>[e(E,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[u.type==="content"?e("div",{class:"content-header"},u.header):null,e("div",F(u))]),e("button",{class:"search-pro-close-icon",onClick:f=>{g(i),f.stopPropagation()}},e(P))]))])):c.value.emptyHistory:M.value?e("ul",{class:"search-pro-result-list"},v.value.map(({title:u,contents:i},f)=>{const C=t.value===f;return e("li",{class:["search-pro-result-list-item",{active:C}]},[e("div",{class:"search-pro-result-title"},u||"Documentation"),i.map((y,T)=>{const I=C&&o.value===T;return e(K,{to:y.path,class:["search-pro-result-item",{active:I,"aria-selected":I}],onClick:()=>{r(y),L()}},()=>[y.type==="content"?null:e(y.type==="title"?W:y.type==="heading"?X:D,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",F(y))])])})])})):c.value.emptyResult)}});export{me as default};
